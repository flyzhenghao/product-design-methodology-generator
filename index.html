<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>äº§å“è®¾è®¡æ–¹æ³•è®ºAIç”Ÿæˆå™¨</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    "Helvetica Neue", Arial, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }

            .header {
                text-align: center;
                margin-bottom: 40px;
                color: white;
            }

            .header h1 {
                font-size: 2.5rem;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            }

            .header p {
                font-size: 1.1rem;
                opacity: 0.9;
            }

            .progress-bar {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 50px;
                height: 10px;
                margin: 30px 0;
                overflow: hidden;
            }

            .progress-fill {
                background: linear-gradient(90deg, #00c875 0%, #9cd326 100%);
                height: 100%;
                border-radius: 50px;
                transition: width 0.5s ease;
                box-shadow: 0 2px 10px rgba(0, 200, 117, 0.5);
            }

            .steps-nav {
                display: flex;
                justify-content: center;
                margin-bottom: 30px;
                flex-wrap: wrap;
                gap: 15px;
            }

            .step-indicator {
                background: white;
                padding: 12px 20px;
                border-radius: 30px;
                display: flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .step-indicator.active {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                transform: scale(1.05);
            }

            .step-indicator.completed {
                background: #00c875;
                color: white;
            }

            .step-indicator .step-number {
                width: 30px;
                height: 30px;
                border-radius: 50%;
                background: rgba(0, 0, 0, 0.1);
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }

            .step-indicator.active .step-number,
            .step-indicator.completed .step-number {
                background: rgba(255, 255, 255, 0.3);
            }

            .content-area {
                background: white;
                border-radius: 20px;
                padding: 40px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
                min-height: 500px;
            }

            .step-content {
                display: none;
            }

            .step-content.active {
                display: block;
                animation: fadeIn 0.5s ease;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .step-header {
                margin-bottom: 30px;
                padding-bottom: 20px;
                border-bottom: 2px solid #f0f0f0;
            }

            .step-header h2 {
                color: #333;
                font-size: 1.8rem;
                margin-bottom: 10px;
            }

            .step-header p {
                color: #666;
                font-size: 1rem;
                line-height: 1.6;
            }

            .input-group {
                margin-bottom: 25px;
            }

            .input-group label {
                display: block;
                margin-bottom: 8px;
                color: #555;
                font-weight: 500;
            }

            .input-group textarea,
            .input-group input {
                width: 100%;
                padding: 12px;
                border: 2px solid #e0e0e0;
                border-radius: 10px;
                font-size: 1rem;
                transition: all 0.3s ease;
                resize: vertical;
                font-family: inherit;
            }

            .input-group textarea:focus,
            .input-group input:focus {
                outline: none;
                border-color: #667eea;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            .suggestion-box {
                background: #f8f9ff;
                border: 2px solid #e8eaff;
                border-radius: 12px;
                padding: 20px;
                margin: 20px 0;
            }

            .suggestion-box h3 {
                color: #667eea;
                margin-bottom: 15px;
                font-size: 1.1rem;
            }

            .suggestion-item {
                background: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 10px;
                border: 1px solid #e0e0e0;
                transition: all 0.3s ease;
            }

            .suggestion-item:hover {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
                transform: translateY(-2px);
            }

            .btn-group {
                display: flex;
                gap: 15px;
                justify-content: flex-end;
                margin-top: 30px;
                flex-wrap: wrap;
            }

            .btn {
                padding: 12px 30px;
                border: none;
                border-radius: 8px;
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .btn-primary {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
            }

            .btn-primary:hover:not(:disabled) {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            }

            .btn-secondary {
                background: #f0f0f0;
                color: #666;
            }

            .btn-secondary:hover {
                background: #e0e0e0;
            }

            .btn-success {
                background: linear-gradient(135deg, #00c875, #9cd326);
                color: white;
            }

            .btn-success:hover:not(:disabled) {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 200, 117, 0.4);
            }

            .btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .editable-content {
                background: #fafafa;
                border: 2px dashed #ddd;
                border-radius: 8px;
                padding: 15px;
                margin: 10px 0;
                min-height: 80px;
                cursor: text;
                transition: all 0.3s ease;
                font-family: inherit;
            }

            .editable-content:hover {
                border-color: #667eea;
                background: #f8f9ff;
            }

            .editable-content:focus {
                outline: none;
                border-style: solid;
                border-color: #667eea;
                background: white;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            .jtbd-statement {
                background: linear-gradient(135deg, #f8f9ff, #fef6ff);
                border-left: 4px solid #667eea;
                padding: 20px;
                margin: 20px 0;
                border-radius: 0 10px 10px 0;
            }

            .force-analysis {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .force-card {
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                transition: all 0.3s ease;
            }

            .force-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }

            .force-push {
                background: #ffe4e4;
                border: 2px solid #ff6b6b;
            }
            .force-pull {
                background: #e4f4ff;
                border: 2px solid #4dabf7;
            }
            .force-anxiety {
                background: #fff4e4;
                border: 2px solid #ffd43b;
            }
            .force-habit {
                background: #f0e4ff;
                border: 2px solid #c084fc;
            }

            .story-map {
                overflow-x: auto;
                margin: 20px 0;
            }

            .story-map-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .story-card {
                background: linear-gradient(135deg, #f0f4ff, #f8f0ff);
                border: 2px solid #e0e0e0;
                border-radius: 10px;
                padding: 15px;
                transition: all 0.3s ease;
            }

            .story-card:hover {
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                transform: translateY(-2px);
            }

            .story-card h4 {
                color: #667eea;
                margin-bottom: 10px;
            }

            .story-card ul {
                list-style: none;
                padding: 0;
            }

            .story-card li {
                padding: 4px 0;
                color: #666;
            }

            .kano-matrix {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .kano-category {
                padding: 20px;
                border-radius: 12px;
            }

            .kano-must {
                background: #ffe4e4;
                border: 2px solid #ff6b6b;
            }
            .kano-performance {
                background: #fff4e4;
                border: 2px solid #ffd43b;
            }
            .kano-attractive {
                background: #e4ffe4;
                border: 2px solid #00c875;
            }

            .document-preview {
                background: #fafafa;
                border: 1px solid #e0e0e0;
                border-radius: 10px;
                padding: 30px;
                margin: 20px 0;
                max-height: 500px;
                overflow-y: auto;
                white-space: pre-wrap;
                font-family: inherit;
                line-height: 1.8;
            }

            .mvp-preview {
                background: #1e1e1e;
                color: #d4d4d4;
                border-radius: 10px;
                padding: 20px;
                margin: 20px 0;
                max-height: 500px;
                overflow: auto;
            }

            .mvp-preview pre {
                margin: 0;
                font-family: "Consolas", "Monaco", "Courier New", monospace;
                font-size: 14px;
                line-height: 1.5;
            }

            .loading {
                display: inline-block;
                width: 20px;
                height: 20px;
                border: 3px solid #f3f3f3;
                border-top: 3px solid #667eea;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-left: 10px;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            .error-message {
                background: #fee;
                border: 1px solid #fcc;
                color: #c00;
                padding: 10px 15px;
                border-radius: 8px;
                margin: 10px 0;
            }

            .success-message {
                background: #e4ffe4;
                border: 1px solid #00c875;
                color: #008800;
                padding: 20px;
                border-radius: 10px;
                margin: 20px 0;
            }

            @media (max-width: 768px) {
                .content-area {
                    padding: 20px;
                }

                .force-analysis {
                    grid-template-columns: 1fr;
                }

                .step-indicator span {
                    display: none;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸš€ äº§å“è®¾è®¡æ–¹æ³•è®ºAIç”Ÿæˆå™¨</h1>
                <p>ä»æƒ³æ³•åˆ°MVPï¼ŒAIé©±åŠ¨çš„äº§å“è®¾è®¡å…¨æµç¨‹</p>
            </div>

            <div class="progress-bar">
                <div
                    class="progress-fill"
                    id="progressBar"
                    style="width: 16.66%"
                ></div>
            </div>

            <div class="steps-nav">
                <div class="step-indicator active" onclick="goToStep(1)">
                    <div class="step-number">1</div>
                    <span>ğŸ’¡ æƒ³æ³•</span>
                </div>
                <div class="step-indicator" onclick="goToStep(2)">
                    <div class="step-number">2</div>
                    <span>ğŸ¯ JTBD</span>
                </div>
                <div class="step-indicator" onclick="goToStep(3)">
                    <div class="step-number">3</div>
                    <span>ğŸ—ºï¸ æ•…äº‹åœ°å›¾</span>
                </div>
                <div class="step-indicator" onclick="goToStep(4)">
                    <div class="step-number">4</div>
                    <span>ğŸ’ å¡è¯ºæ¨¡å‹</span>
                </div>
                <div class="step-indicator" onclick="goToStep(5)">
                    <div class="step-number">5</div>
                    <span>ğŸ“„ è®¾è®¡æ–‡æ¡£</span>
                </div>
                <div class="step-indicator" onclick="goToStep(6)">
                    <div class="step-number">6</div>
                    <span>ğŸ—ï¸ MVP</span>
                </div>
            </div>

            <div class="content-area">
                <!-- Step 1: æƒ³æ³• -->
                <div class="step-content active" id="step1">
                    <div class="step-header">
                        <h2>ğŸ’¡ ç¬¬ä¸€æ­¥ï¼šæè¿°ä½ çš„äº§å“æƒ³æ³•</h2>
                        <p>æ¸…æ™°åœ°æè¿°ä½ çš„äº§å“æ¦‚å¿µï¼ŒAIå°†å¸®ä½ ä¼˜åŒ–å’Œå®Œå–„</p>
                    </div>

                    <div class="input-group">
                        <label for="productIdea">äº§å“æƒ³æ³•æè¿°</label>
                        <textarea
                            id="productIdea"
                            rows="6"
                            placeholder="ä¾‹å¦‚ï¼šæˆ‘æƒ³åšä¸€ä¸ªå¸®åŠ©å¤§å­¦ç”Ÿäº¤æ˜“äºŒæ‰‹æ•™æçš„å¹³å°ï¼Œè®©å­¦ç”Ÿå¯ä»¥æ–¹ä¾¿åœ°ä¹°å–è¯¾æœ¬ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ†äº«å­¦ä¹ ç¬”è®°å’Œç»éªŒ..."
                        ></textarea>
                    </div>

                    <button
                        class="btn btn-primary"
                        onclick="generateSuggestions()"
                    >
                        <span id="btn1Text">ç”Ÿæˆä¼˜åŒ–å»ºè®®</span>
                        <span
                            id="loading1"
                            class="loading"
                            style="display: none"
                        ></span>
                    </button>

                    <div
                        id="errorMsg1"
                        class="error-message"
                        style="display: none"
                    ></div>

                    <div
                        id="ideaSuggestions"
                        class="suggestion-box"
                        style="display: none"
                    >
                        <h3>ğŸ’¡ AIä¼˜åŒ–å»ºè®®</h3>
                        <div id="suggestionsList"></div>
                        <div class="input-group">
                            <label>ä¼˜åŒ–åçš„äº§å“æè¿°ï¼ˆå¯ç¼–è¾‘ï¼‰</label>
                            <textarea id="optimizedIdea" rows="6"></textarea>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="confirmBtn1"
                        style="display: none"
                    >
                        <button
                            class="btn btn-success"
                            onclick="confirmStep1()"
                        >
                            ç¡®è®¤å¹¶ç»§ç»­ â†’
                        </button>
                    </div>
                </div>

                <!-- Step 2: JTBDåˆ†æ -->
                <div class="step-content" id="step2">
                    <div class="step-header">
                        <h2>ğŸ¯ ç¬¬äºŒæ­¥ï¼šJTBDåˆ†æ</h2>
                        <p>ç†è§£ç”¨æˆ·"é›‡ä½£"äº§å“æ¥å®Œæˆçš„çœŸå®ä»»åŠ¡</p>
                    </div>

                    <div
                        id="jtbdLoading"
                        style="display: none; text-align: center; padding: 50px"
                    >
                        <div
                            class="loading"
                            style="width: 40px; height: 40px"
                        ></div>
                        <p style="margin-top: 20px">AIæ­£åœ¨ç”ŸæˆJTBDåˆ†æ...</p>
                    </div>

                    <div id="jtbdContent" style="display: none">
                        <div class="jtbd-statement">
                            <h3>JTBDé™ˆè¿°å¥</h3>
                            <div
                                contenteditable="true"
                                class="editable-content"
                                id="jtbdStatement"
                            >
                                When [æƒ…å¢ƒ] â†’ I want to [åŠ¨ä½œ] â†’ So I can [ç»“æœ]
                            </div>
                        </div>

                        <h3>å››åŠ›åˆ†æ</h3>
                        <div class="force-analysis">
                            <div class="force-card force-push">
                                <h4>æ¨åŠ› Push</h4>
                                <div
                                    contenteditable="true"
                                    class="editable-content"
                                    id="forcePush"
                                >
                                    ç°çŠ¶çš„ä¸æ»¡
                                </div>
                            </div>
                            <div class="force-card force-pull">
                                <h4>æ‹‰åŠ› Pull</h4>
                                <div
                                    contenteditable="true"
                                    class="editable-content"
                                    id="forcePull"
                                >
                                    æ–°æ–¹æ¡ˆçš„å¸å¼•
                                </div>
                            </div>
                            <div class="force-card force-anxiety">
                                <h4>ç„¦è™‘ Anxiety</h4>
                                <div
                                    contenteditable="true"
                                    class="editable-content"
                                    id="forceAnxiety"
                                >
                                    æ”¹å˜çš„æ‹…å¿§
                                </div>
                            </div>
                            <div class="force-card force-habit">
                                <h4>æƒ¯æ€§ Habit</h4>
                                <div
                                    contenteditable="true"
                                    class="editable-content"
                                    id="forceHabit"
                                >
                                    ä¹ æƒ¯çš„é˜»åŠ›
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="jtbdButtons"
                        style="display: none"
                    >
                        <button class="btn btn-secondary" onclick="goToStep(1)">
                            â† è¿”å›ä¸Šä¸€æ­¥
                        </button>
                        <button
                            class="btn btn-success"
                            onclick="confirmStep2()"
                        >
                            ç¡®è®¤å¹¶ç»§ç»­ â†’
                        </button>
                    </div>
                </div>

                <!-- Step 3: ç”¨æˆ·æ•…äº‹åœ°å›¾ -->
                <div class="step-content" id="step3">
                    <div class="step-header">
                        <h2>ğŸ—ºï¸ ç¬¬ä¸‰æ­¥:ç”¨æˆ·æ•…äº‹åœ°å›¾</h2>
                        <p>å°†ç”¨æˆ·éœ€æ±‚è½¬åŒ–ä¸ºå¯è§†åŒ–çš„äº§å“åŠŸèƒ½è“å›¾</p>
                    </div>

                    <div
                        id="storyMapLoading"
                        style="display: none; text-align: center; padding: 50px"
                    >
                        <div
                            class="loading"
                            style="width: 40px; height: 40px"
                        ></div>
                        <p style="margin-top: 20px">
                            AIæ­£åœ¨ç”Ÿæˆç”¨æˆ·æ•…äº‹åœ°å›¾...
                        </p>
                    </div>

                    <div id="storyMapContent" style="display: none">
                        <div class="suggestion-box">
                            <h3>ç”¨æˆ·æ—…ç¨‹éª¨æ¶</h3>
                            <div id="userJourney" class="story-map-grid"></div>
                        </div>

                        <div class="suggestion-box">
                            <h3>åŠŸèƒ½æ¸…å•</h3>
                            <p style="color: #666; margin-bottom: 15px">
                                åŸºäºç”¨æˆ·æ—…ç¨‹è¯†åˆ«çš„æ ¸å¿ƒåŠŸèƒ½
                            </p>
                            <div id="featuresList"></div>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="storyMapButtons"
                        style="display: none"
                    >
                        <button class="btn btn-secondary" onclick="goToStep(2)">
                            â† è¿”å›ä¸Šä¸€æ­¥
                        </button>
                        <button
                            class="btn btn-success"
                            onclick="confirmStep3()"
                        >
                            ç¡®è®¤å¹¶ç»§ç»­ â†’
                        </button>
                    </div>
                </div>

                <!-- Step 4: å¡è¯ºæ¨¡å‹åˆ†æ -->
                <div class="step-content" id="step4">
                    <div class="step-header">
                        <h2>ğŸ’ ç¬¬å››æ­¥:å¡è¯ºæ¨¡å‹åˆ†æ</h2>
                        <p>ç§‘å­¦è¯„ä¼°åŠŸèƒ½ä»·å€¼ï¼Œä¼˜åŒ–èµ„æºé…ç½®</p>
                    </div>

                    <div
                        id="kanoLoading"
                        style="display: none; text-align: center; padding: 50px"
                    >
                        <div
                            class="loading"
                            style="width: 40px; height: 40px"
                        ></div>
                        <p style="margin-top: 20px">
                            AIæ­£åœ¨è¿›è¡Œå¡è¯ºæ¨¡å‹åˆ†æ...
                        </p>
                    </div>

                    <div id="kanoContent" style="display: none">
                        <div class="kano-matrix">
                            <div class="kano-category kano-must">
                                <h3>ğŸ”´ å¿…å¤‡å±æ€§ (Must-have)</h3>
                                <p
                                    style="
                                        font-size: 0.9rem;
                                        color: #666;
                                        margin: 10px 0;
                                    "
                                >
                                    ç¼ºå¤±ä¼šå¯¼è‡´å¼ºçƒˆä¸æ»¡çš„åŸºç¡€åŠŸèƒ½
                                </p>
                                <div
                                    id="kanoMust"
                                    class="editable-content"
                                    contenteditable="true"
                                ></div>
                            </div>

                            <div class="kano-category kano-performance">
                                <h3>ğŸŸ¡ æœŸæœ›å±æ€§ (Performance)</h3>
                                <p
                                    style="
                                        font-size: 0.9rem;
                                        color: #666;
                                        margin: 10px 0;
                                    "
                                >
                                    è¶Šå¤šè¶Šå¥½ï¼Œä¸æ»¡æ„åº¦æˆæ­£æ¯”
                                </p>
                                <div
                                    id="kanoPerformance"
                                    class="editable-content"
                                    contenteditable="true"
                                ></div>
                            </div>

                            <div class="kano-category kano-attractive">
                                <h3>ğŸŸ¢ é­…åŠ›å±æ€§ (Attractive)</h3>
                                <p
                                    style="
                                        font-size: 0.9rem;
                                        color: #666;
                                        margin: 10px 0;
                                    "
                                >
                                    è¶…é¢„æœŸçš„æƒŠå–œåŠŸèƒ½
                                </p>
                                <div
                                    id="kanoAttractive"
                                    class="editable-content"
                                    contenteditable="true"
                                ></div>
                            </div>
                        </div>

                        <div class="suggestion-box" style="margin-top: 30px">
                            <h3>ğŸ“Š MVPå»ºè®®</h3>
                            <div
                                id="mvpSuggestion"
                                style="
                                    background: white;
                                    padding: 20px;
                                    border-radius: 8px;
                                    line-height: 1.8;
                                "
                            ></div>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="kanoButtons"
                        style="display: none"
                    >
                        <button class="btn btn-secondary" onclick="goToStep(3)">
                            â† è¿”å›ä¸Šä¸€æ­¥
                        </button>
                        <button
                            class="btn btn-success"
                            onclick="confirmStep4()"
                        >
                            ç¡®è®¤å¹¶ç»§ç»­ â†’
                        </button>
                    </div>
                </div>

                <!-- Step 5: è®¾è®¡æ–‡æ¡£ -->
                <div class="step-content" id="step5">
                    <div class="step-header">
                        <h2>ğŸ“„ ç¬¬äº”æ­¥:äº§å“è®¾è®¡æ–‡æ¡£</h2>
                        <p>æ•´åˆæ‰€æœ‰åˆ†æï¼Œç”Ÿæˆå®Œæ•´çš„äº§å“è§„æ ¼è¯´æ˜</p>
                    </div>

                    <div
                        id="docLoading"
                        style="display: none; text-align: center; padding: 50px"
                    >
                        <div
                            class="loading"
                            style="width: 40px; height: 40px"
                        ></div>
                        <p style="margin-top: 20px">
                            AIæ­£åœ¨ç”Ÿæˆäº§å“è®¾è®¡æ–‡æ¡£...
                        </p>
                    </div>

                    <div id="docContent" style="display: none">
                        <div
                            class="document-preview"
                            id="documentPreview"
                        ></div>

                        <div class="btn-group" style="margin-top: 20px">
                            <button
                                class="btn btn-primary"
                                onclick="downloadDocument()"
                            >
                                ğŸ“¥ ä¸‹è½½æ–‡æ¡£
                            </button>
                            <button
                                class="btn btn-secondary"
                                onclick="copyDocument()"
                            >
                                ğŸ“‹ å¤åˆ¶æ–‡æ¡£
                            </button>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="docButtons"
                        style="display: none"
                    >
                        <button class="btn btn-secondary" onclick="goToStep(4)">
                            â† è¿”å›ä¸Šä¸€æ­¥
                        </button>
                        <button
                            class="btn btn-success"
                            onclick="confirmStep5()"
                        >
                            ç¡®è®¤å¹¶ç»§ç»­ â†’
                        </button>
                    </div>
                </div>

                <!-- Step 6: MVPåŸå‹ -->
                <div class="step-content" id="step6">
                    <div class="step-header">
                        <h2>ğŸ—ï¸ ç¬¬å…­æ­¥:MVPåŸå‹ä»£ç </h2>
                        <p>åŸºäºè®¾è®¡æ–‡æ¡£ç”Ÿæˆå¯æ‰§è¡Œçš„MVPåŸå‹</p>
                    </div>

                    <div
                        id="mvpLoading"
                        style="display: none; text-align: center; padding: 50px"
                    >
                        <div
                            class="loading"
                            style="width: 40px; height: 40px"
                        ></div>
                        <p style="margin-top: 20px">AIæ­£åœ¨ç”ŸæˆMVPåŸå‹ä»£ç ...</p>
                    </div>

                    <div id="mvpContent" style="display: none">
                        <div class="suggestion-box">
                            <h3>ğŸ¨ æŠ€æœ¯æ ˆå»ºè®®</h3>
                            <div
                                id="techStack"
                                style="
                                    background: white;
                                    padding: 15px;
                                    border-radius: 8px;
                                    margin-top: 10px;
                                "
                            ></div>
                        </div>

                        <div class="mvp-preview" id="mvpPreview"></div>

                        <div class="btn-group" style="margin-top: 20px">
                            <button
                                class="btn btn-primary"
                                onclick="downloadMVP()"
                            >
                                ğŸ“¥ ä¸‹è½½ä»£ç 
                            </button>
                            <button
                                class="btn btn-secondary"
                                onclick="copyMVP()"
                            >
                                ğŸ“‹ å¤åˆ¶ä»£ç 
                            </button>
                        </div>
                    </div>

                    <div
                        class="btn-group"
                        id="mvpButtons"
                        style="display: none"
                    >
                        <button class="btn btn-secondary" onclick="goToStep(5)">
                            â† è¿”å›ä¸Šä¸€æ­¥
                        </button>
                        <button
                            class="btn btn-success"
                            onclick="completeProject()"
                        >
                            âœ… å®Œæˆé¡¹ç›®
                        </button>
                    </div>
                </div>
            </div>

            <footer
                style="
                    text-align: center;
                    margin-top: 40px;
                    padding: 20px;
                    color: white;
                "
            >
                <p style="opacity: 0.8; font-size: 0.9rem">
                    ç‰ˆæœ¬ 1.0 | æ›´æ–°äº 2025-12-04
                </p>
            </footer>
        </div>

        <script>
            // å…¨å±€çŠ¶æ€ç®¡ç†
            let projectData = {
                idea: "",
                optimizedIdea: "",
                suggestions: null,
                jtbd: {
                    statement: "",
                    forces: {
                        push: "",
                        pull: "",
                        anxiety: "",
                        habit: "",
                    },
                },
                storyMap: {
                    journey: [],
                    features: [],
                },
                kano: {
                    must: [],
                    performance: [],
                    attractive: [],
                },
                document: "",
                mvp: "",
            };

            let currentStep = 1;
            let maxCompletedStep = 0;

            // Claude APIè°ƒç”¨
            async function callClaudeAPI(prompt, maxTokens = 3000) {
                try {
                    const response = await fetch(
                        "https://api.anthropic.com/v1/messages",
                        {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({
                                model: "claude-sonnet-4-20250514",
                                max_tokens: maxTokens,
                                messages: [
                                    {
                                        role: "user",
                                        content: prompt,
                                    },
                                ],
                            }),
                        },
                    );

                    const data = await response.json();
                    return data.content[0].text;
                } catch (error) {
                    console.error("APIè°ƒç”¨å¤±è´¥:", error);
                    throw new Error("AIç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•");
                }
            }

            // å¥å£®çš„JSONè§£æå‡½æ•°
            function parseClaudeJSON(responseText) {
                try {
                    // æ–¹æ³•1: ç›´æ¥è§£æ
                    return JSON.parse(responseText);
                } catch (e1) {
                    try {
                        // æ–¹æ³•2: ç§»é™¤markdownä»£ç å—
                        let cleaned = responseText
                            .replace(/```json\s*/g, "")
                            .replace(/```\s*/g, "")
                            .trim();
                        return JSON.parse(cleaned);
                    } catch (e2) {
                        try {
                            // æ–¹æ³•3: æå–å¤§æ‹¬å·ä¹‹é—´çš„å†…å®¹
                            const jsonMatch = responseText.match(/\{[\s\S]*\}/);
                            if (jsonMatch) {
                                return JSON.parse(jsonMatch[0]);
                            }
                            throw new Error("æ— æ³•æ‰¾åˆ°JSONå†…å®¹");
                        } catch (e3) {
                            // æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ç”¨äºè°ƒè¯•
                            console.error(
                                "JSONè§£æå¤±è´¥ï¼ŒåŸå§‹å“åº”ï¼š",
                                responseText,
                            );
                            console.error("è§£æé”™è¯¯ï¼š", e3);
                            throw new Error(
                                "JSONè§£æå¤±è´¥ï¼Œè¯·é‡è¯•ã€‚å¦‚æŒç»­å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ã€‚",
                            );
                        }
                    }
                }
            }

            // Step 1: ç”Ÿæˆä¼˜åŒ–å»ºè®®
            async function generateSuggestions() {
                const idea = document.getElementById("productIdea").value;
                if (!idea) {
                    showError("errorMsg1", "è¯·å…ˆè¾“å…¥ä½ çš„äº§å“æƒ³æ³•");
                    return;
                }

                projectData.idea = idea;
                setLoading("btn1Text", "loading1", true);
                hideError("errorMsg1");

                try {
                    const prompt = `ä½œä¸ºäº§å“è®¾è®¡ä¸“å®¶ï¼Œè¯·åˆ†æä»¥ä¸‹äº§å“æƒ³æ³•å¹¶æä¾›ä¼˜åŒ–å»ºè®®ï¼š

äº§å“æƒ³æ³•ï¼š${idea}

è¯·ä»¥JSONæ ¼å¼è¿”å›ä»¥ä¸‹å†…å®¹ã€‚

CRITICAL: ä½ çš„æ•´ä¸ªå“åº”å¿…é¡»åªåŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€è§£é‡Šã€æˆ–markdownæ ‡è®°ï¼ˆå¦‚\`\`\`jsonï¼‰ã€‚ç›´æ¥ä»¥{å¼€å§‹ï¼Œä»¥}ç»“æŸã€‚

{
  "targetUser": "æ˜ç¡®çš„ç›®æ ‡ç”¨æˆ·ç¾¤ä½“æè¿°",
  "coreProblem": "äº§å“è§£å†³çš„æ ¸å¿ƒé—®é¢˜",
  "uniqueValue": "ç‹¬ç‰¹ä»·å€¼ä¸»å¼ ",
  "businessModel": "å¯è¡Œçš„å•†ä¸šæ¨¡å¼å»ºè®®",
  "optimizedIdea": "ä¼˜åŒ–åçš„å®Œæ•´äº§å“æè¿°"
}`;

                    const response = await callClaudeAPI(prompt);
                    const suggestions = parseClaudeJSON(response);

                    projectData.suggestions = suggestions;
                    projectData.optimizedIdea = suggestions.optimizedIdea;

                    displaySuggestions(suggestions);
                    document.getElementById("ideaSuggestions").style.display =
                        "block";
                    document.getElementById("confirmBtn1").style.display =
                        "block";
                } catch (err) {
                    showError(
                        "errorMsg1",
                        err.message || "ç”Ÿæˆå»ºè®®å¤±è´¥ï¼Œè¯·é‡è¯•",
                    );
                } finally {
                    setLoading("btn1Text", "loading1", false);
                }
            }

            function displaySuggestions(suggestions) {
                const suggestionsList =
                    document.getElementById("suggestionsList");
                suggestionsList.innerHTML = `
                <div class="suggestion-item">
                    <strong>ç›®æ ‡ç”¨æˆ·ï¼š</strong>${suggestions.targetUser}
                </div>
                <div class="suggestion-item">
                    <strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong>${suggestions.coreProblem}
                </div>
                <div class="suggestion-item">
                    <strong>ç‹¬ç‰¹ä»·å€¼ï¼š</strong>${suggestions.uniqueValue}
                </div>
                <div class="suggestion-item">
                    <strong>å•†ä¸šæ¨¡å¼ï¼š</strong>${suggestions.businessModel}
                </div>
            `;
                document.getElementById("optimizedIdea").value =
                    suggestions.optimizedIdea;
            }

            async function confirmStep1() {
                const optimizedIdea =
                    document.getElementById("optimizedIdea").value;
                if (!optimizedIdea) {
                    showError("errorMsg1", "è¯·ç¡®è®¤ä¼˜åŒ–åçš„äº§å“æè¿°");
                    return;
                }

                projectData.optimizedIdea = optimizedIdea;
                maxCompletedStep = Math.max(maxCompletedStep, 1);

                // è¿›å…¥ç¬¬äºŒæ­¥å¹¶ç”ŸæˆJTBD
                goToStep(2);
                await generateJTBD();
            }

            // Step 2: ç”ŸæˆJTBD
            async function generateJTBD() {
                document.getElementById("jtbdLoading").style.display = "block";
                document.getElementById("jtbdContent").style.display = "none";
                document.getElementById("jtbdButtons").style.display = "none";

                try {
                    const prompt = `åŸºäºä»¥ä¸‹äº§å“æè¿°ï¼Œç”ŸæˆJTBDï¼ˆJobs to be Doneï¼‰åˆ†æï¼š

äº§å“æè¿°ï¼š${projectData.optimizedIdea}

è¯·ä»¥JSONæ ¼å¼è¿”å›ã€‚

CRITICAL: ä½ çš„æ•´ä¸ªå“åº”å¿…é¡»åªåŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€è§£é‡Šã€æˆ–markdownæ ‡è®°ï¼ˆå¦‚\`\`\`jsonï¼‰ã€‚ç›´æ¥ä»¥{å¼€å§‹ï¼Œä»¥}ç»“æŸã€‚

{
  "statement": "å®Œæ•´çš„JTBDé™ˆè¿°å¥ï¼Œæ ¼å¼ï¼šWhen [æƒ…å¢ƒ] â†’ I want to [åŠ¨ä½œ] â†’ So I can [ç»“æœ]",
  "forces": {
    "push": "æ¨åŠ›ï¼šç°çŠ¶çš„ä¸æ»¡ï¼ˆç”¨æˆ·ç—›ç‚¹ï¼‰",
    "pull": "æ‹‰åŠ›ï¼šæ–°æ–¹æ¡ˆçš„å¸å¼•åŠ›",
    "anxiety": "ç„¦è™‘ï¼šæ”¹å˜çš„æ‹…å¿§",
    "habit": "æƒ¯æ€§ï¼šç°æœ‰ä¹ æƒ¯çš„é˜»åŠ›"
  }
}`;

                    const response = await callClaudeAPI(prompt);
                    const jtbdData = parseClaudeJSON(response);

                    projectData.jtbd = jtbdData;

                    // æ˜¾ç¤ºç»“æœ
                    document.getElementById("jtbdStatement").innerText =
                        jtbdData.statement;
                    document.getElementById("forcePush").innerText =
                        jtbdData.forces.push;
                    document.getElementById("forcePull").innerText =
                        jtbdData.forces.pull;
                    document.getElementById("forceAnxiety").innerText =
                        jtbdData.forces.anxiety;
                    document.getElementById("forceHabit").innerText =
                        jtbdData.forces.habit;

                    document.getElementById("jtbdLoading").style.display =
                        "none";
                    document.getElementById("jtbdContent").style.display =
                        "block";
                    document.getElementById("jtbdButtons").style.display =
                        "flex";
                } catch (err) {
                    console.error(err);
                    alert("ç”ŸæˆJTBDå¤±è´¥ï¼š" + (err.message || "è¯·é‡è¯•"));
                    document.getElementById("jtbdLoading").style.display =
                        "none";
                }
            }

            function confirmStep2() {
                // ä¿å­˜ç¼–è¾‘åçš„JTBDæ•°æ®
                projectData.jtbd = {
                    statement:
                        document.getElementById("jtbdStatement").innerText,
                    forces: {
                        push: document.getElementById("forcePush").innerText,
                        pull: document.getElementById("forcePull").innerText,
                        anxiety:
                            document.getElementById("forceAnxiety").innerText,
                        habit: document.getElementById("forceHabit").innerText,
                    },
                };

                maxCompletedStep = Math.max(maxCompletedStep, 2);
                goToStep(3);
                generateStoryMap();
            }

            // Step 3: ç”Ÿæˆç”¨æˆ·æ•…äº‹åœ°å›¾
            async function generateStoryMap() {
                document.getElementById("storyMapLoading").style.display =
                    "block";
                document.getElementById("storyMapContent").style.display =
                    "none";
                document.getElementById("storyMapButtons").style.display =
                    "none";

                try {
                    const prompt = `åŸºäºä»¥ä¸‹äº§å“ä¿¡æ¯ï¼Œç”Ÿæˆç”¨æˆ·æ•…äº‹åœ°å›¾ï¼š

äº§å“æè¿°ï¼š${projectData.optimizedIdea}

JTBDé™ˆè¿°ï¼š${projectData.jtbd.statement}

è¯·ä»¥JSONæ ¼å¼è¿”å›ã€‚

CRITICAL: ä½ çš„æ•´ä¸ªå“åº”å¿…é¡»åªåŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€è§£é‡Šã€æˆ–markdownæ ‡è®°ï¼ˆå¦‚\`\`\`jsonï¼‰ã€‚ç›´æ¥ä»¥{å¼€å§‹ï¼Œä»¥}ç»“æŸã€‚

{
  "journey": [
    {
      "stage": "é˜¶æ®µåç§°",
      "description": "é˜¶æ®µæè¿°",
      "tasks": ["ä»»åŠ¡1", "ä»»åŠ¡2", "ä»»åŠ¡3"]
    }
  ],
  "features": [
    {
      "name": "åŠŸèƒ½åç§°",
      "description": "åŠŸèƒ½æè¿°",
      "stage": "å¯¹åº”çš„ç”¨æˆ·æ—…ç¨‹é˜¶æ®µ",
      "priority": "high/medium/low"
    }
  ]
}

æ³¨æ„ï¼š
1. journeyåº”è¯¥åŒ…å«3-5ä¸ªç”¨æˆ·æ—…ç¨‹é˜¶æ®µ
2. featuresåº”è¯¥åŒ…å«8-12ä¸ªæ ¸å¿ƒåŠŸèƒ½
3. æ¯ä¸ªåŠŸèƒ½è¦æ˜ç¡®å¯¹åº”åˆ°æŸä¸ªæ—…ç¨‹é˜¶æ®µ`;

                    const response = await callClaudeAPI(prompt);
                    const storyMapData = parseClaudeJSON(response);

                    projectData.storyMap = storyMapData;

                    // æ˜¾ç¤ºç”¨æˆ·æ—…ç¨‹
                    const journeyHTML = storyMapData.journey
                        .map(
                            (stage) => `
                    <div class="story-card">
                        <h4>${stage.stage}</h4>
                        <p style="color:#666; font-size:0.9rem; margin:10px 0;">${stage.description}</p>
                        <ul>
                            ${stage.tasks.map((task) => `<li>â€¢ ${task}</li>`).join("")}
                        </ul>
                    </div>
                `,
                        )
                        .join("");
                    document.getElementById("userJourney").innerHTML =
                        journeyHTML;

                    // æ˜¾ç¤ºåŠŸèƒ½æ¸…å•
                    const groupedFeatures = {};
                    storyMapData.features.forEach((feature) => {
                        if (!groupedFeatures[feature.stage]) {
                            groupedFeatures[feature.stage] = [];
                        }
                        groupedFeatures[feature.stage].push(feature);
                    });

                    let featuresHTML = "";
                    Object.keys(groupedFeatures).forEach((stage) => {
                        featuresHTML += `
                        <div class="suggestion-item">
                            <strong style="color:#667eea;">${stage}</strong>
                            <ul style="margin-top:10px; padding-left:20px;">
                                ${groupedFeatures[stage]
                                    .map(
                                        (f) => `
                                    <li style="margin:5px 0;">
                                        <strong>${f.name}</strong>
                                        <span style="color:#999; font-size:0.9rem;">[${f.priority === "high" ? "é«˜" : f.priority === "medium" ? "ä¸­" : "ä½"}]</span>
                                        <br><span style="color:#666; font-size:0.9rem;">${f.description}</span>
                                    </li>
                                `,
                                    )
                                    .join("")}
                            </ul>
                        </div>
                    `;
                    });
                    document.getElementById("featuresList").innerHTML =
                        featuresHTML;

                    document.getElementById("storyMapLoading").style.display =
                        "none";
                    document.getElementById("storyMapContent").style.display =
                        "block";
                    document.getElementById("storyMapButtons").style.display =
                        "flex";
                } catch (err) {
                    console.error(err);
                    alert("ç”Ÿæˆç”¨æˆ·æ•…äº‹åœ°å›¾å¤±è´¥ï¼š" + (err.message || "è¯·é‡è¯•"));
                    document.getElementById("storyMapLoading").style.display =
                        "none";
                }
            }

            function confirmStep3() {
                maxCompletedStep = Math.max(maxCompletedStep, 3);
                goToStep(4);
                generateKanoAnalysis();
            }

            // Step 4: ç”Ÿæˆå¡è¯ºæ¨¡å‹åˆ†æ
            async function generateKanoAnalysis() {
                document.getElementById("kanoLoading").style.display = "block";
                document.getElementById("kanoContent").style.display = "none";
                document.getElementById("kanoButtons").style.display = "none";

                try {
                    const featuresText = projectData.storyMap.features
                        .map((f) => `${f.name}: ${f.description}`)
                        .join("\n");

                    const prompt = `åŸºäºä»¥ä¸‹åŠŸèƒ½åˆ—è¡¨ï¼Œè¿›è¡Œå¡è¯ºæ¨¡å‹åˆ†æï¼š

äº§å“ï¼š${projectData.optimizedIdea}

åŠŸèƒ½åˆ—è¡¨ï¼š
${featuresText}

è¯·å°†åŠŸèƒ½åˆ†ç±»åˆ°å¡è¯ºæ¨¡å‹çš„ä¸‰ä¸ªä¸»è¦ç±»åˆ«ã€‚

CRITICAL: ä½ çš„æ•´ä¸ªå“åº”å¿…é¡»åªåŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€è§£é‡Šã€æˆ–markdownæ ‡è®°ï¼ˆå¦‚\`\`\`jsonï¼‰ã€‚ç›´æ¥ä»¥{å¼€å§‹ï¼Œä»¥}ç»“æŸã€‚

{
  "must": [
    {"name": "åŠŸèƒ½å", "reason": "åˆ†ç±»ç†ç”±"}
  ],
  "performance": [
    {"name": "åŠŸèƒ½å", "reason": "åˆ†ç±»ç†ç”±"}
  ],
  "attractive": [
    {"name": "åŠŸèƒ½å", "reason": "åˆ†ç±»ç†ç”±"}
  ],
  "mvpRecommendation": "åŸºäºå¡è¯ºåˆ†æçš„MVPèŒƒå›´å»ºè®®ï¼ˆ200å­—ä»¥å†…ï¼‰"
}

åˆ†ç±»æ ‡å‡†ï¼š
- must: å¿…å¤‡åŠŸèƒ½ï¼Œç¼ºå¤±ä¼šå¯¼è‡´ç”¨æˆ·ä¸æ»¡
- performance: æœŸæœ›åŠŸèƒ½ï¼Œè¶Šå¥½æ»¡æ„åº¦è¶Šé«˜
- attractive: é­…åŠ›åŠŸèƒ½ï¼Œè¶…é¢„æœŸçš„æƒŠå–œ`;

                    const response = await callClaudeAPI(prompt);
                    const kanoData = parseClaudeJSON(response);

                    projectData.kano = kanoData;

                    // æ˜¾ç¤ºåˆ†ç±»ç»“æœ
                    document.getElementById("kanoMust").innerHTML =
                        kanoData.must
                            .map(
                                (f) =>
                                    `<div style="margin:10px 0;"><strong>${f.name}</strong><br><span style="color:#666; font-size:0.9rem;">${f.reason}</span></div>`,
                            )
                            .join("");

                    document.getElementById("kanoPerformance").innerHTML =
                        kanoData.performance
                            .map(
                                (f) =>
                                    `<div style="margin:10px 0;"><strong>${f.name}</strong><br><span style="color:#666; font-size:0.9rem;">${f.reason}</span></div>`,
                            )
                            .join("");

                    document.getElementById("kanoAttractive").innerHTML =
                        kanoData.attractive
                            .map(
                                (f) =>
                                    `<div style="margin:10px 0;"><strong>${f.name}</strong><br><span style="color:#666; font-size:0.9rem;">${f.reason}</span></div>`,
                            )
                            .join("");

                    document.getElementById("mvpSuggestion").innerHTML =
                        kanoData.mvpRecommendation;

                    document.getElementById("kanoLoading").style.display =
                        "none";
                    document.getElementById("kanoContent").style.display =
                        "block";
                    document.getElementById("kanoButtons").style.display =
                        "flex";
                } catch (err) {
                    console.error(err);
                    alert("ç”Ÿæˆå¡è¯ºæ¨¡å‹åˆ†æå¤±è´¥ï¼š" + (err.message || "è¯·é‡è¯•"));
                    document.getElementById("kanoLoading").style.display =
                        "none";
                }
            }

            function confirmStep4() {
                // ä¿å­˜å¯èƒ½ç¼–è¾‘è¿‡çš„å¡è¯ºåˆ†æ
                projectData.kano.must = parseEditableList("kanoMust");
                projectData.kano.performance =
                    parseEditableList("kanoPerformance");
                projectData.kano.attractive =
                    parseEditableList("kanoAttractive");

                maxCompletedStep = Math.max(maxCompletedStep, 4);
                goToStep(5);
                generateDocument();
            }

            function parseEditableList(elementId) {
                const content = document.getElementById(elementId).innerHTML;
                const items = [];
                const div = document.createElement("div");
                div.innerHTML = content;
                const divs = div.querySelectorAll("div");
                divs.forEach((d) => {
                    const strong = d.querySelector("strong");
                    const span = d.querySelector("span");
                    if (strong) {
                        items.push({
                            name: strong.textContent,
                            reason: span ? span.textContent : "",
                        });
                    }
                });
                return items;
            }

            // Step 5: ç”Ÿæˆäº§å“è®¾è®¡æ–‡æ¡£
            async function generateDocument() {
                document.getElementById("docLoading").style.display = "block";
                document.getElementById("docContent").style.display = "none";
                document.getElementById("docButtons").style.display = "none";

                try {
                    const prompt = `åŸºäºä»¥ä¸‹äº§å“è®¾è®¡ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä»½å®Œæ•´çš„äº§å“è®¾è®¡æ–‡æ¡£ï¼š

1. äº§å“æ¦‚è¿°ï¼š
${projectData.optimizedIdea}

2. JTBDåˆ†æï¼š
${projectData.jtbd.statement}
- æ¨åŠ›ï¼š${projectData.jtbd.forces.push}
- æ‹‰åŠ›ï¼š${projectData.jtbd.forces.pull}
- ç„¦è™‘ï¼š${projectData.jtbd.forces.anxiety}
- æƒ¯æ€§ï¼š${projectData.jtbd.forces.habit}

3. ç”¨æˆ·æ—…ç¨‹ï¼š
${JSON.stringify(projectData.storyMap.journey, null, 2)}

4. æ ¸å¿ƒåŠŸèƒ½ï¼š
${JSON.stringify(projectData.storyMap.features, null, 2)}

5. åŠŸèƒ½ä¼˜å…ˆçº§ï¼ˆå¡è¯ºæ¨¡å‹ï¼‰ï¼š
- å¿…å¤‡åŠŸèƒ½ï¼š${projectData.kano.must.map((f) => f.name).join(", ")}
- æœŸæœ›åŠŸèƒ½ï¼š${projectData.kano.performance.map((f) => f.name).join(", ")}
- é­…åŠ›åŠŸèƒ½ï¼š${projectData.kano.attractive.map((f) => f.name).join(", ")}

è¯·ç”Ÿæˆä¸€ä»½ç»“æ„æ¸…æ™°çš„äº§å“è®¾è®¡æ–‡æ¡£ï¼ŒåŒ…å«ä»¥ä¸‹ç« èŠ‚ï¼š
1. äº§å“æ¦‚è¿°
2. ç›®æ ‡ç”¨æˆ·ä¸éœ€æ±‚åˆ†æ
3. äº§å“ä»·å€¼ä¸»å¼ 
4. ç”¨æˆ·æ—…ç¨‹ä¸åœºæ™¯
5. åŠŸèƒ½è§„æ ¼è¯´æ˜
6. MVPèŒƒå›´å®šä¹‰
7. å®æ–½å»ºè®®

æ–‡æ¡£è¦ä¸“ä¸šã€è¯¦ç»†ã€å¯æ‰§è¡Œã€‚ä»¥Markdownæ ¼å¼è¾“å‡ºã€‚`;

                    const response = await callClaudeAPI(prompt, 4000);
                    projectData.document = response;

                    // æ˜¾ç¤ºæ–‡æ¡£
                    document.getElementById("documentPreview").textContent =
                        response;

                    document.getElementById("docLoading").style.display =
                        "none";
                    document.getElementById("docContent").style.display =
                        "block";
                    document.getElementById("docButtons").style.display =
                        "flex";
                } catch (err) {
                    console.error(err);
                    alert("ç”Ÿæˆè®¾è®¡æ–‡æ¡£å¤±è´¥ï¼š" + (err.message || "è¯·é‡è¯•"));
                    document.getElementById("docLoading").style.display =
                        "none";
                }
            }

            function downloadDocument() {
                const blob = new Blob([projectData.document], {
                    type: "text/markdown",
                });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "äº§å“è®¾è®¡æ–‡æ¡£.md";
                a.click();
                URL.revokeObjectURL(url);
            }

            function copyDocument() {
                navigator.clipboard.writeText(projectData.document).then(() => {
                    alert("æ–‡æ¡£å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
                });
            }

            function confirmStep5() {
                maxCompletedStep = Math.max(maxCompletedStep, 5);
                goToStep(6);
                generateMVP();
            }

            // Step 6: ç”ŸæˆMVPåŸå‹
            async function generateMVP() {
                document.getElementById("mvpLoading").style.display = "block";
                document.getElementById("mvpContent").style.display = "none";
                document.getElementById("mvpButtons").style.display = "none";

                try {
                    // é¦–å…ˆç”ŸæˆæŠ€æœ¯æ ˆå»ºè®®
                    const techPrompt = `åŸºäºä»¥ä¸‹äº§å“ï¼Œæ¨èåˆé€‚çš„æŠ€æœ¯æ ˆï¼š

äº§å“ï¼š${projectData.optimizedIdea}

å¿…å¤‡åŠŸèƒ½ï¼š${projectData.kano.must.map((f) => f.name).join(", ")}

è¯·ä»¥JSONæ ¼å¼è¿”å›æŠ€æœ¯æ ˆå»ºè®®ã€‚

CRITICAL: ä½ çš„æ•´ä¸ªå“åº”å¿…é¡»åªåŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€è§£é‡Šã€æˆ–markdownæ ‡è®°ï¼ˆå¦‚\`\`\`jsonï¼‰ã€‚ç›´æ¥ä»¥{å¼€å§‹ï¼Œä»¥}ç»“æŸã€‚

{
  "frontend": "å‰ç«¯æŠ€æœ¯å»ºè®®",
  "backend": "åç«¯æŠ€æœ¯å»ºè®®",
  "database": "æ•°æ®åº“å»ºè®®",
  "deployment": "éƒ¨ç½²æ–¹æ¡ˆå»ºè®®"
}`;

                    const techResponse = await callClaudeAPI(techPrompt);
                    const techStack = parseClaudeJSON(techResponse);

                    // æ˜¾ç¤ºæŠ€æœ¯æ ˆ
                    document.getElementById("techStack").innerHTML = `
                    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:15px;">
                        <div><strong>å‰ç«¯ï¼š</strong>${techStack.frontend}</div>
                        <div><strong>åç«¯ï¼š</strong>${techStack.backend}</div>
                        <div><strong>æ•°æ®åº“ï¼š</strong>${techStack.database}</div>
                        <div><strong>éƒ¨ç½²ï¼š</strong>${techStack.deployment}</div>
                    </div>
                `;

                    // ç”ŸæˆMVPä»£ç 
                    const mvpPrompt = `åŸºäºä»¥ä¸‹äº§å“è®¾è®¡ï¼Œç”Ÿæˆä¸€ä¸ªç®€å•çš„HTML+JavaScript MVPåŸå‹ï¼š

äº§å“ï¼š${projectData.optimizedIdea}

æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¿…å¤‡ï¼‰ï¼š
${projectData.kano.must.map((f) => `- ${f.name}: ${f.reason}`).join("\n")}

è¦æ±‚ï¼š
1. ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„HTMLæ–‡ä»¶
2. åŒ…å«åŸºæœ¬çš„æ ·å¼
3. å®ç°æ ¸å¿ƒåŠŸèƒ½çš„åŸºæœ¬äº¤äº’
4. ä»£ç è¦ç®€æ´ã€å¯è¿è¡Œ
5. æ·»åŠ å¿…è¦çš„æ³¨é‡Š

ç›´æ¥è¾“å‡ºHTMLä»£ç ï¼Œä¸è¦å…¶ä»–è§£é‡Šæ–‡å­—ã€‚`;

                    const mvpResponse = await callClaudeAPI(mvpPrompt, 4000);

                    // æ¸…ç†å¯èƒ½çš„ä»£ç å—æ ‡è®°
                    let cleanMVP = mvpResponse
                        .replace(/```html\n?/g, "")
                        .replace(/```\n?/g, "")
                        .trim();
                    projectData.mvp = cleanMVP;

                    // æ˜¾ç¤ºä»£ç 
                    document.getElementById("mvpPreview").innerHTML =
                        `<pre>${escapeHtml(cleanMVP)}</pre>`;

                    document.getElementById("mvpLoading").style.display =
                        "none";
                    document.getElementById("mvpContent").style.display =
                        "block";
                    document.getElementById("mvpButtons").style.display =
                        "flex";
                } catch (err) {
                    console.error(err);
                    alert("ç”ŸæˆMVPåŸå‹å¤±è´¥ï¼š" + (err.message || "è¯·é‡è¯•"));
                    document.getElementById("mvpLoading").style.display =
                        "none";
                }
            }

            function escapeHtml(text) {
                const div = document.createElement("div");
                div.textContent = text;
                return div.innerHTML;
            }

            function downloadMVP() {
                const blob = new Blob([projectData.mvp], { type: "text/html" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "mvp-prototype.html";
                a.click();
                URL.revokeObjectURL(url);
            }

            function copyMVP() {
                navigator.clipboard.writeText(projectData.mvp).then(() => {
                    alert("ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
                });
            }

            function completeProject() {
                maxCompletedStep = Math.max(maxCompletedStep, 6);

                const completionMessage = `
ğŸ‰ æ­å–œï¼ä½ å·²å®Œæˆæ•´ä¸ªäº§å“è®¾è®¡æµç¨‹ï¼

âœ… å·²å®Œæˆçš„æ­¥éª¤ï¼š
1. âœ“ äº§å“æƒ³æ³•ä¼˜åŒ–
2. âœ“ JTBDåˆ†æ
3. âœ“ ç”¨æˆ·æ•…äº‹åœ°å›¾
4. âœ“ å¡è¯ºæ¨¡å‹åˆ†æ
5. âœ“ äº§å“è®¾è®¡æ–‡æ¡£
6. âœ“ MVPåŸå‹ä»£ç 

ğŸ“¦ ä½ å¯ä»¥ï¼š
â€¢ ä¸‹è½½è®¾è®¡æ–‡æ¡£å’ŒMVPä»£ç 
â€¢ è¿”å›ä»»æ„æ­¥éª¤è¿›è¡Œä¿®æ”¹
â€¢ å¼€å§‹å®æ–½ä½ çš„äº§å“

ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®ï¼š
1. ä¸å›¢é˜Ÿåˆ†äº«è®¾è®¡æ–‡æ¡£
2. æ”¶é›†ç”¨æˆ·åé¦ˆ
3. è¿­ä»£ä¼˜åŒ–MVP
4. å‡†å¤‡å¼€å‘è®¡åˆ’
            `;

                alert(completionMessage);
            }

            // å¯¼èˆªåŠŸèƒ½
            function goToStep(step) {
                if (step > maxCompletedStep + 1) {
                    alert("è¯·å…ˆå®Œæˆå‰é¢çš„æ­¥éª¤");
                    return;
                }

                document
                    .querySelectorAll(".step-content")
                    .forEach((content) => {
                        content.classList.remove("active");
                    });

                document.getElementById("step" + step).classList.add("active");
                currentStep = step;

                updateProgress(step);
                updateStepIndicators(step);
            }

            function updateProgress(step) {
                const progressBar = document.getElementById("progressBar");
                const percentage = (step / 6) * 100;
                progressBar.style.width = percentage + "%";
            }

            function updateStepIndicators(activeStep) {
                const indicators = document.querySelectorAll(".step-indicator");
                indicators.forEach((indicator, index) => {
                    indicator.classList.remove("active", "completed");
                    if (index + 1 < activeStep && index < maxCompletedStep) {
                        indicator.classList.add("completed");
                    } else if (index + 1 === activeStep) {
                        indicator.classList.add("active");
                    }
                });
            }

            // å·¥å…·å‡½æ•°
            function setLoading(textId, loadingId, isLoading) {
                document.getElementById(textId).style.display = isLoading
                    ? "none"
                    : "inline";
                document.getElementById(loadingId).style.display = isLoading
                    ? "inline-block"
                    : "none";
            }

            function showError(id, message) {
                const errorElement = document.getElementById(id);
                errorElement.textContent = message;
                errorElement.style.display = "block";
            }

            function hideError(id) {
                document.getElementById(id).style.display = "none";
            }
        </script>
    </body>
</html>
